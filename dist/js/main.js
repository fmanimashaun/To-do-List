"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[179],{753:(t,e,s)=>{class o{constructor(){this.description=document.querySelector(".todos__label-input").value,this.completed=!1,this.index=null}}const a=s.p+"img/done.svg",l=s.p+"img/delete.svg",n=s.p+"img/drag.svg",c=document.querySelector(".todos__form"),i=document.querySelector(".todos__list"),d=new class{constructor(){this.tasks=[]}getTasks(){return localStorage.getItem("taskList")?JSON.parse(localStorage.getItem("taskList")):this.tasks}display(){(t=>{const e=document.querySelector(".todos__list");if(e.innerHTML="",0===t.length){const t=document.createElement("p");t.className="todos__list-emply",t.innerText="Empty task list",e.appendChild(t)}else t.forEach((t=>{const s=document.createElement("div");s.draggable=!0,s.className="todo";const o=document.createElement("button");o.className="todo__btn-check";const c=document.createElement("img");c.src=a,c.alt="to do completion icon",c.className="todo__check-img";const i=document.createElement("label");i.className="todo__label",i.htmlFor=`todo__item-${t.index}`;const d=document.createElement("textarea");d.className="todo__item",d.name="todo__item",d.id=`todo__item-${t.index}`,d.cols="30",d.rows="1",d.innerText=t.description,!0===t.completed&&(d.classList.add("completed"),o.classList.add("checked"));const r=document.createElement("button");r.className="todo__btn-delete";const m=document.createElement("img");m.src=l,m.alt="delete icon",m.className="todo__delete-img";const p=document.createElement("img");p.src=n,p.alt="drag icon",p.className="todo__btn-drag",o.appendChild(c),s.appendChild(o),i.appendChild(d),r.appendChild(m),i.appendChild(r),s.appendChild(i),s.appendChild(p),e.appendChild(s)}))})(this.getTasks())}addTask(t){const e=this.getTasks();t.index=e.length+1,e.push(t),localStorage.setItem("taskList",JSON.stringify(e)),this.display()}removeTask(){const t=document.querySelector(".todos__list");t.addEventListener("click",(e=>{if(e.target.matches("textarea")){const t=e.target.parentElement.parentElement;t.classList.add("focus"),console.log(t)}else if(e.target.classList.contains("todo__btn-delete")){const s=this.getTasks();if(1===s.length)t.innerHTML="",s.splice(0,1),localStorage.setItem("taskList",JSON.stringify(s)),this.display();else{const t=e.target.parentElement,o=t.getAttribute("for").split("-")[1]-1,a=t.parentElement;a.parentElement.removeChild(a),s.splice(o,1),s.forEach(((t,e)=>{t.index=e+1})),localStorage.setItem("taskList",JSON.stringify(s)),this.display()}}}))}updateTask(){document.querySelector(".todos__list").addEventListener("click",(t=>{if(t.target.matches("textarea")){const e=t.target,s=t.target.parentElement;let o=s.getAttribute("for").split("-")[1];(t=>{const e=[];let s=t.parentNode.firstChild;for(;s;)1===s.nodeType&&s!==t&&e.push(s),s=s.nextSibling;return e})(s.parentElement).forEach((t=>{t.classList.contains("focus")&&t.classList.remove("focus")})),e.addEventListener("change",(()=>{const t=this.getTasks(),s=e.value;o-=1,t[o].description=s,localStorage.setItem("taskList",JSON.stringify(t)),this.display()}))}else if(t.target.classList.contains("todo__btn-check")){const e=this.getTasks();t.target.classList.toggle("checked");const s=t.target.nextElementSibling,o=s.firstChild,a=s.getAttribute("for").split("-")[1]-1;o.classList.toggle("completed"),e[a].completed=!e[a].completed,localStorage.setItem("taskList",JSON.stringify(e))}}))}clearAllCompleted(){document.querySelector(".todos__clear-btn").addEventListener("click",(()=>{const t=this.getTasks().filter((t=>!1===t.completed));t.forEach(((t,e)=>{t.index=e+1})),localStorage.setItem("taskList",JSON.stringify(t)),this.display()}))}};c.addEventListener("submit",(t=>{t.preventDefault();const e=new o;d.addTask(e),c.reset()})),window.addEventListener("load",(()=>{d.display(),d.updateTask(),d.removeTask(),d.clearAllCompleted()})),window.addEventListener("click",(t=>{t.stopPropagation(),t.target.classList.contains("todo__btn-delete")||t.target.classList.contains("todo")||i.childNodes.forEach((t=>{t.classList.remove("focus")}))}))}},t=>{t(t.s=753)}]);