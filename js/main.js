"use strict";(self.webpackChunktodo_list=self.webpackChunktodo_list||[]).push([[179],{753:(t,e,s)=>{class a{constructor(){this.description=document.querySelector(".todos__label-input").value,this.completed=!1,this.index=null}}const o=s.p+"img/done.svg",l=s.p+"img/delete.svg",n=s.p+"img/drag.svg",i=document.querySelector(".todos__form"),c=document.querySelector(".todo__list"),d=new class{constructor(){this.tasks=[]}getTasks(){return localStorage.getItem("taskList")?JSON.parse(localStorage.getItem("taskList")):this.tasks}display(){(t=>{const e=document.querySelector(".todo__list");if(e.innerHTML="",0===t.length){const t=document.createElement("p");t.className="task__list-emply",t.innerText="Empty task list",e.appendChild(t)}else t.forEach((t=>{const s=document.createElement("div");s.draggable=!0,s.className="todo__item";const a=document.createElement("button");a.className="todo__btn-check";const i=document.createElement("img");i.src=o,i.alt="to do completion icon",i.className="todo__check-img";const c=document.createElement("label");c.className="todo__label",c.htmlFor=`todo__item-${t.index}`;const d=document.createElement("textarea");d.className="todo",d.name="todo_item",d.id=`todo__item-${t.index}`,d.cols="30",d.rows="1",d.innerText=t.description,!0===t.completed&&(d.classList.add("completed"),a.classList.add("checked"));const r=document.createElement("button");r.className="todo__btn-delete";const m=document.createElement("img");m.src=l,m.alt="delete icon",m.className="todo__delete-img";const p=document.createElement("img");p.src=n,p.alt="drag icon",p.className="todo__btn-drag",a.appendChild(i),s.appendChild(a),c.appendChild(d),r.appendChild(m),c.appendChild(r),s.appendChild(c),s.appendChild(p),e.appendChild(s)}))})(this.getTasks())}addTask(t){const e=this.getTasks();t.index=e.length+1,e.push(t),localStorage.setItem("taskList",JSON.stringify(e)),this.display()}removeTask(){const t=document.querySelector(".todo__list");t.addEventListener("click",(e=>{if(e.target.matches("textarea"))e.target.parentElement.parentElement.classList.add("focus");else if(e.target.classList.contains("todo__btn-delete")){const s=this.getTasks();if(1===s.length)t.innerHTML="",s.splice(0,1),localStorage.setItem("taskList",JSON.stringify(s)),this.display();else{const t=e.target.parentElement,a=t.getAttribute("for").split("-")[1]-1,o=t.parentElement;o.parentElement.removeChild(o),s.splice(a,1),s.forEach(((t,e)=>{t.index=e+1})),localStorage.setItem("taskList",JSON.stringify(s)),this.display()}}}))}updateTask(){document.querySelector(".todo__list").addEventListener("click",(t=>{if(t.target.matches("textarea")){const e=t.target,s=t.target.parentElement;let a=s.getAttribute("for").split("-")[1];(t=>{const e=[];let s=t.parentNode.firstChild;for(;s;)1===s.nodeType&&s!==t&&e.push(s),s=s.nextSibling;return e})(s.parentElement).forEach((t=>{t.classList.contains("focus")&&t.classList.remove("focus")})),e.addEventListener("change",(()=>{const t=this.getTasks(),s=e.value;a-=1,t[a].description=s,localStorage.setItem("taskList",JSON.stringify(t)),this.display()}))}else if(t.target.classList.contains("todo__btn-check")){const e=this.getTasks();t.target.classList.toggle("checked");const s=t.target.nextElementSibling,a=s.firstChild,o=s.getAttribute("for").split("-")[1]-1;a.classList.toggle("completed"),e[o].completed=!e[o].completed,localStorage.setItem("taskList",JSON.stringify(e))}}))}clearAllCompleted(){document.querySelector(".todo__clear-btn").addEventListener("click",(()=>{const t=this.getTasks().filter((t=>!1===t.completed));t.forEach(((t,e)=>{t.index=e+1})),localStorage.setItem("taskList",JSON.stringify(t)),this.display()}))}};i.addEventListener("submit",(t=>{t.preventDefault();const e=new a;d.addTask(e),i.reset()})),window.addEventListener("load",(()=>{d.display(),d.updateTask(),d.removeTask(),d.clearAllCompleted()})),window.addEventListener("click",(t=>{t.stopPropagation(),t.target.classList.contains("todo__btn-delete")||t.target.classList.contains("todo")||c.childNodes.forEach((t=>{t.classList.remove("focus")}))}))}},t=>{t(t.s=753)}]);